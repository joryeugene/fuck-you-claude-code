#!/usr/bin/env sh

# Yabai configuration
# https://github.com/koekeishiya/yabai

# Tiling settings
yabai -m config layout bsp
yabai -m config window_placement second_child

# Split ratio
yabai -m config split_ratio 0.50

# Padding and gaps (matching aerospace's 5px setup)
yabai -m config top_padding    5
yabai -m config bottom_padding 5
yabai -m config left_padding   5
yabai -m config right_padding  5
yabai -m config window_gap     5

# Mouse settings (matching aerospace behavior)
yabai -m config mouse_follows_focus off
yabai -m config focus_follows_mouse off

# Window modifications
yabai -m config window_shadow float
yabai -m config window_opacity on
yabai -m config active_window_opacity 1.0
yabai -m config normal_window_opacity 0.95

# Border (removed - not available in this yabai version)
# yabai -m config window_border off

# Floating windows rules (matching aerospace config)
yabai -m rule --add app="^System Settings$" manage=off
yabai -m rule --add app="^System Preferences$" manage=off
yabai -m rule --add app="^Calculator$" manage=off
yabai -m rule --add app="^Finder$" manage=off

# Sketchybar integration - trigger space change event
yabai -m signal --add event=space_changed action="sketchybar --trigger space_change"
yabai -m signal --add event=window_focused action="sketchybar --trigger space_change"
yabai -m signal --add event=window_created action="sketchybar --trigger space_change"
yabai -m signal --add event=window_destroyed action="sketchybar --trigger space_change"

echo "yabai configuration loaded.."
